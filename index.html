<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Firewatch Parallax Scroll</title>
<style>
body {
  margin: 0;
  font-family: sans-serif;
  overflow-x: hidden;
  height: 200vh;
  background: #2D112B;
}

/* --- パララックス全体 --- */
.parallax {
  position: relative;
  height: 100vh;
  perspective: 300px;
  transform-style: preserve-3d;
  overflow: hidden;
  transition: transform 1.2s ease, opacity 1s ease;
}

/* --- レイヤー共通設定 --- */
.parallax__layer {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform-style: preserve-3d;
  transform-origin: bottom center;
  width: 200%;
  pointer-events: none;
}

.parallax__layer img {
  width: 100%;
  height: auto;
  display: block;
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}

/* --- 深度調整（Sassの展開版）--- */
.parallax__layer__0 { transform: translateZ(-300px) scale(4); }
.parallax__layer__1 { transform: translateZ(-250px) scale(3.5); }
.parallax__layer__2 { transform: translateZ(-200px) scale(3); }
.parallax__layer__3 { transform: translateZ(-150px) scale(2.5); }
.parallax__layer__4 { transform: translateZ(-100px) scale(2); }
.parallax__layer__5 { transform: translateZ(-50px) scale(1.5); }
.parallax__layer__6 { transform: translateZ(0) scale(1); }

/* --- 森が上に逃げるとき --- */
.parallax.fade-out {
  transform: translateY(-40vh);
  opacity: 0;
}

/* --- メインページ --- */
.content {
  background: #fff;
  color: #333;
  min-height: 200vh;
  padding: 120px 20px;
  text-align: center;
}

.content h1 {
  font-size: 3em;
  margin-bottom: 1em;
}
</style>
</head>
<body>

<!-- 森の背景 -->
<div class="parallax" id="forest">
  <div class="parallax__layer parallax__layer__0"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_0.png?raw=true" /></div>
  <div class="parallax__layer parallax__layer__1"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_1.png?raw=true" /></div>
  <div class="parallax__layer parallax__layer__2"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_2.png?raw=true" /></div>
  <div class="parallax__layer parallax__layer__3"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_3.png?raw=true" /></div>
  <div class="parallax__layer parallax__layer__4"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_4.png?raw=true" /></div>
  <div class="parallax__layer parallax__layer__5"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_5.png?raw=true" /></div>
  <div class="parallax__layer parallax__layer__6"><img src="https://github.com/samdbeckham/blog/blob/master/dev/_assets/images/articles/firewatch/layer_6.png?raw=true" /></div>
</div>

<!-- コンテンツ -->
<div class="content">
  <h1>森の向こうへようこそ</h1>
  <p>スクロールすると森が上に逃げ、本ページが現れます。</p>
  <p>すべてのレイヤーが地面で揃って動くように調整しています。</p>
</div>

<script>
// スクロールで森をフェードアウト
const forest = document.getElementById("forest");
window.addEventListener("scroll", () => {
  const scrollY = window.scrollY;
  if (scrollY > window.innerHeight * 0.3) {
    forest.classList.add("fade-out");
  } else {
    forest.classList.remove("fade-out");
  }
});
</script>

</body>
</html>